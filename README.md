# VPA benchmarking

## Important files and directories

* `benchmark-large.sh`: script to run the benchmark on a larger cluster.
  * Requires:
    * `oc` (kubectl is probably fine too)
    * `jq`
    * `httpie` for API requests against Prometheus
  * Prerequisites: 
    * `oc` is logged into an OpenShift cluster.
    * Vertical Pod Autoscaler Operator is ready in the openshift-vertical-pod-autoscaler namespace.
    * The OpenShift cluster has not turned off default monitoring.
      * i.e. there exists a thanos querier route in the openshift-monitoring namespace.
    * Your cluster has `>=~50CPUs` and `>=~220 GiB` of memory allocated.
  * Usage: `./benchmark.sh <test_phase>`

* `parse_benchmark.py`: Python script that parses the benchmark result CSV files and outputs a Matplotlib plot.
  * Requires the `matplotlib` and `pandas` Python packages.
  * Usage: `python parse_benchmark.py <csv_file>`
    * csv_file: the CSV file containing the benchmark results.
  * The script will parse the CSV file name and uses it to decide which test phase to plot. Do not rename the `*_results.csv` files if you want the script to work.
* `raw/`: directory containing the raw results of the benchmark
* `graphs/`: directory containing the graphs generated by the `parse_benchmark.py` script.
* `performance/`: directory containing yaml files that define the deployments and VPA objects used in the benchmark.
